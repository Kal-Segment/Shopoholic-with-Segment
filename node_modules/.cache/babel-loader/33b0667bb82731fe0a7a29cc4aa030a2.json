{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kal.kolacahill/Shopoholic WebApp/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kal.kolacahill/Shopoholic WebApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{fetchPhones as fetchPhonesApi,loadMore as loadMoreApi,fetchPhoneById as fetchPhoneByIdApi,fetchCategories as fetchCategoriesApi}from\"../api/fetchPhones\";import{getRenderedPhonesLength}from\"../selectors/Phones\";export var applyDiscount=function applyDiscount(invertedDiscount,code){return function(dispatch){dispatch({type:\"APPLY_COUPON_CODE\",payload:{invertedDiscount:invertedDiscount,code:code}});};};export var fetchPhones=function fetchPhones(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var phones;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch({type:\"FETCH_PHONE_START\"});_context.next=4;return fetchPhonesApi();case 4:phones=_context.sent;dispatch({type:\"FETCH_PHONE_SUCCESS\",payload:phones});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);dispatch({type:\"FETCH_PHONE_FAIL\",payload:_context.t0,error:true});case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var fetchCategories=function fetchCategories(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch,getState){var categories;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;dispatch({type:\"FETCH_CATEGORIES_START\"});_context2.next=4;return fetchCategoriesApi();case 4:categories=_context2.sent;dispatch({type:\"FETCH_CATEGORIES_SUCCESS\",payload:categories});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);dispatch({type:\"FETCH_CATEGORIES_FAILURE\",payload:_context2.t0,error:true});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);}));return function(_x2,_x3){return _ref2.apply(this,arguments);};}();};export var loadMore=function loadMore(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch,getState){var offset,phones;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:offset=getRenderedPhonesLength(getState());_context3.prev=1;dispatch({type:\"LOAD_MORE_START\"});_context3.next=5;return loadMoreApi({offset:offset});case 5:phones=_context3.sent;dispatch({type:\"LOAD_MORE_SUCCESS\",payload:phones});_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](1);dispatch({type:\"LOAD_MORE_FAILURE\",payload:_context3.t0,error:true});case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[1,9]]);}));return function(_x4,_x5){return _ref3.apply(this,arguments);};}();};export var fetchPhoneById=function fetchPhoneById(id){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,getState){var phone;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;dispatch({type:\"FETCH_PHONE_BY_ID_START\"});_context4.next=4;return fetchPhoneByIdApi(id);case 4:phone=_context4.sent;dispatch({type:\"FETCH_PHONE_BY_ID_SUCCESS\",payload:phone});_context4.next=11;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](0);dispatch({type:\"FETCH_PHONE_BY_ID_FAILURE\",payload:_context4.t0,error:true});case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[0,8]]);}));return function(_x6,_x7){return _ref4.apply(this,arguments);};}();};export var addPhoneToBasket=function addPhoneToBasket(id){return function(dispatch){dispatch({type:\"ADD_PHONE_TO_BASKET\",payload:id});};};export var searchPhone=function searchPhone(text){return function(dispatch){console.log(\"searching \",text);dispatch({type:\"SEARCH_PHONE\",payload:text});};};export var removePhoneFromBasket=function removePhoneFromBasket(id){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:dispatch({type:\"REMOVE_PHONE_FROM_BASKET\",payload:id});case 1:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x8){return _ref5.apply(this,arguments);};}();};export var cleanBasket=function cleanBasket(){return function(dispatch){dispatch({type:\"CLEAN_BASKET\"});};};export var basketCheckout=function basketCheckout(phones){return function(dispatch,getState){var _getState$Coupon=getState().Coupon,coupon=_getState$Coupon.code,invertedDiscount=_getState$Coupon.invertedDiscount;var revenue=phones.reduce(function(a,b){return a+(b.price*invertedDiscount||0);},0);alert(JSON.stringify(phones));};};","map":{"version":3,"sources":["/Users/kal.kolacahill/Shopoholic WebApp/src/actions/Phones.js"],"names":["fetchPhones","fetchPhonesApi","loadMore","loadMoreApi","fetchPhoneById","fetchPhoneByIdApi","fetchCategories","fetchCategoriesApi","getRenderedPhonesLength","applyDiscount","invertedDiscount","code","dispatch","type","payload","phones","error","getState","categories","offset","id","phone","addPhoneToBasket","searchPhone","text","console","log","removePhoneFromBasket","cleanBasket","basketCheckout","Coupon","coupon","revenue","reduce","a","b","price","alert","JSON","stringify"],"mappings":"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","sourcesContent":["import {\r\n  fetchPhones as fetchPhonesApi,\r\n  loadMore as loadMoreApi,\r\n  fetchPhoneById as fetchPhoneByIdApi,\r\n  fetchCategories as fetchCategoriesApi,\r\n} from \"../api/fetchPhones\";\r\nimport { getRenderedPhonesLength } from \"../selectors/Phones\";\r\n\r\nexport const applyDiscount = (invertedDiscount, code) => (dispatch) => {\r\n  dispatch({\r\n    type: \"APPLY_COUPON_CODE\",\r\n    payload: { invertedDiscount, code },\r\n  });\r\n};\r\n\r\nexport const fetchPhones = () => {\r\n  return async (dispatch) => {\r\n    try {\r\n      dispatch({\r\n        type: \"FETCH_PHONE_START\",\r\n      });\r\n      const phones = await fetchPhonesApi();\r\n      dispatch({\r\n        type: \"FETCH_PHONE_SUCCESS\",\r\n        payload: phones,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FETCH_PHONE_FAIL\",\r\n        payload: err,\r\n        error: true,\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const fetchCategories = () => {\r\n  return async (dispatch, getState) => {\r\n    // console.log(\"Fetching entire state \", getState());\r\n    try {\r\n      dispatch({\r\n        type: \"FETCH_CATEGORIES_START\",\r\n      });\r\n      const categories = await fetchCategoriesApi();\r\n      dispatch({\r\n        type: \"FETCH_CATEGORIES_SUCCESS\",\r\n        payload: categories,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FETCH_CATEGORIES_FAILURE\",\r\n        payload: err,\r\n        error: true,\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const loadMore = () => {\r\n  return async (dispatch, getState) => {\r\n    const offset = getRenderedPhonesLength(getState());\r\n    try {\r\n      dispatch({\r\n        type: \"LOAD_MORE_START\",\r\n      });\r\n      const phones = await loadMoreApi({ offset });\r\n      dispatch({\r\n        type: \"LOAD_MORE_SUCCESS\",\r\n        payload: phones,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"LOAD_MORE_FAILURE\",\r\n        payload: err,\r\n        error: true,\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const fetchPhoneById = (id) => {\r\n  return async (dispatch, getState) => {\r\n    try {\r\n      dispatch({\r\n        type: \"FETCH_PHONE_BY_ID_START\",\r\n      });\r\n      const phone = await fetchPhoneByIdApi(id);\r\n      dispatch({\r\n        type: \"FETCH_PHONE_BY_ID_SUCCESS\",\r\n        payload: phone,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FETCH_PHONE_BY_ID_FAILURE\",\r\n        payload: err,\r\n        error: true,\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const addPhoneToBasket = (id) => (dispatch) => {\r\n  dispatch({\r\n    type: \"ADD_PHONE_TO_BASKET\",\r\n    payload: id,\r\n  });\r\n};\r\n\r\nexport const searchPhone = (text) => (dispatch) => {\r\n  console.log(\"searching \", text);\r\n  dispatch({\r\n    type: \"SEARCH_PHONE\",\r\n    payload: text,\r\n  });\r\n};\r\n\r\nexport const removePhoneFromBasket = (id) => async (dispatch) => {\r\n  dispatch({\r\n    type: \"REMOVE_PHONE_FROM_BASKET\",\r\n    payload: id,\r\n  });\r\n};\r\n\r\nexport const cleanBasket = () => (dispatch) => {\r\n  dispatch({\r\n    type: \"CLEAN_BASKET\",\r\n  });\r\n};\r\n\r\nexport const basketCheckout = (phones) => (dispatch, getState) => {\r\n  const { code: coupon, invertedDiscount } = getState().Coupon;\r\n  const revenue = phones.reduce(\r\n    (a, b) => a + (b.price * invertedDiscount || 0),\r\n    0\r\n  );\r\n\r\n  alert(JSON.stringify(phones));\r\n};\r\n"]},"metadata":{},"sourceType":"module"}