{"ast":null,"code":"import { fetchPhones as fetchPhonesApi, loadMore as loadMoreApi, fetchPhoneById as fetchPhoneByIdApi, fetchCategories as fetchCategoriesApi } from \"../api/fetchPhones\";\nimport { getRenderedPhonesLength } from \"../selectors/Phones\";\nexport const applyDiscount = (invertedDiscount, code) => dispatch => {\n  dispatch({\n    type: \"APPLY_COUPON_CODE\",\n    payload: {\n      invertedDiscount,\n      code\n    }\n  });\n};\nexport const fetchPhones = () => {\n  return async dispatch => {\n    try {\n      dispatch({\n        type: \"FETCH_PHONE_START\"\n      });\n      const phones = await fetchPhonesApi();\n      dispatch({\n        type: \"FETCH_PHONE_SUCCESS\",\n        payload: phones\n      });\n    } catch (err) {\n      dispatch({\n        type: \"FETCH_PHONE_FAIL\",\n        payload: err,\n        error: true\n      });\n    }\n  };\n};\nexport const fetchCategories = () => {\n  return async (dispatch, getState) => {\n    // console.log(\"Fetching entire state \", getState());\n    try {\n      dispatch({\n        type: \"FETCH_CATEGORIES_START\"\n      });\n      const categories = await fetchCategoriesApi();\n      dispatch({\n        type: \"FETCH_CATEGORIES_SUCCESS\",\n        payload: categories\n      });\n    } catch (err) {\n      dispatch({\n        type: \"FETCH_CATEGORIES_FAILURE\",\n        payload: err,\n        error: true\n      });\n    }\n  };\n};\nexport const loadMore = () => {\n  return async (dispatch, getState) => {\n    const offset = getRenderedPhonesLength(getState());\n\n    try {\n      dispatch({\n        type: \"LOAD_MORE_START\"\n      });\n      const phones = await loadMoreApi({\n        offset\n      });\n      dispatch({\n        type: \"LOAD_MORE_SUCCESS\",\n        payload: phones\n      });\n    } catch (err) {\n      dispatch({\n        type: \"LOAD_MORE_FAILURE\",\n        payload: err,\n        error: true\n      });\n    }\n  };\n};\nexport const fetchPhoneById = id => {\n  return async (dispatch, getState) => {\n    try {\n      dispatch({\n        type: \"FETCH_PHONE_BY_ID_START\"\n      });\n      const phone = await fetchPhoneByIdApi(id);\n      dispatch({\n        type: \"FETCH_PHONE_BY_ID_SUCCESS\",\n        payload: phone\n      });\n    } catch (err) {\n      dispatch({\n        type: \"FETCH_PHONE_BY_ID_FAILURE\",\n        payload: err,\n        error: true\n      });\n    }\n  };\n};\nexport const addPhoneToBasket = id => dispatch => {\n  dispatch({\n    type: \"ADD_PHONE_TO_BASKET\",\n    payload: id\n  });\n};\nexport const searchPhone = text => dispatch => {\n  console.log(\"searching \", text);\n  dispatch({\n    type: \"SEARCH_PHONE\",\n    payload: text\n  });\n};\nexport const removePhoneFromBasket = id => async dispatch => {\n  dispatch({\n    type: \"REMOVE_PHONE_FROM_BASKET\",\n    payload: id\n  });\n};\nexport const cleanBasket = () => dispatch => {\n  dispatch({\n    type: \"CLEAN_BASKET\"\n  });\n};\nexport const basketCheckout = phones => (dispatch, getState) => {\n  const {\n    code: coupon,\n    invertedDiscount\n  } = getState().Coupon;\n  const revenue = phones.reduce((a, b) => a + (b.price * invertedDiscount || 0), 0);\n  alert(JSON.stringify(phones));\n};","map":{"version":3,"sources":["/Users/kal.kolacahill/Downloads/simple-ecommerce-web-lt-master/src/actions/Phones.js"],"names":["fetchPhones","fetchPhonesApi","loadMore","loadMoreApi","fetchPhoneById","fetchPhoneByIdApi","fetchCategories","fetchCategoriesApi","getRenderedPhonesLength","applyDiscount","invertedDiscount","code","dispatch","type","payload","phones","err","error","getState","categories","offset","id","phone","addPhoneToBasket","searchPhone","text","console","log","removePhoneFromBasket","cleanBasket","basketCheckout","coupon","Coupon","revenue","reduce","a","b","price","alert","JSON","stringify"],"mappings":"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","sourcesContent":["import {\r\n  fetchPhones as fetchPhonesApi,\r\n  loadMore as loadMoreApi,\r\n  fetchPhoneById as fetchPhoneByIdApi,\r\n  fetchCategories as fetchCategoriesApi,\r\n} from \"../api/fetchPhones\";\r\nimport { getRenderedPhonesLength } from \"../selectors/Phones\";\r\n\r\nexport const applyDiscount = (invertedDiscount, code) => (dispatch) => {\r\n  dispatch({\r\n    type: \"APPLY_COUPON_CODE\",\r\n    payload: { invertedDiscount, code },\r\n  });\r\n};\r\n\r\nexport const fetchPhones = () => {\r\n  return async (dispatch) => {\r\n    try {\r\n      dispatch({\r\n        type: \"FETCH_PHONE_START\",\r\n      });\r\n      const phones = await fetchPhonesApi();\r\n      dispatch({\r\n        type: \"FETCH_PHONE_SUCCESS\",\r\n        payload: phones,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FETCH_PHONE_FAIL\",\r\n        payload: err,\r\n        error: true,\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const fetchCategories = () => {\r\n  return async (dispatch, getState) => {\r\n    // console.log(\"Fetching entire state \", getState());\r\n    try {\r\n      dispatch({\r\n        type: \"FETCH_CATEGORIES_START\",\r\n      });\r\n      const categories = await fetchCategoriesApi();\r\n      dispatch({\r\n        type: \"FETCH_CATEGORIES_SUCCESS\",\r\n        payload: categories,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FETCH_CATEGORIES_FAILURE\",\r\n        payload: err,\r\n        error: true,\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const loadMore = () => {\r\n  return async (dispatch, getState) => {\r\n    const offset = getRenderedPhonesLength(getState());\r\n    try {\r\n      dispatch({\r\n        type: \"LOAD_MORE_START\",\r\n      });\r\n      const phones = await loadMoreApi({ offset });\r\n      dispatch({\r\n        type: \"LOAD_MORE_SUCCESS\",\r\n        payload: phones,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"LOAD_MORE_FAILURE\",\r\n        payload: err,\r\n        error: true,\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const fetchPhoneById = (id) => {\r\n  return async (dispatch, getState) => {\r\n    try {\r\n      dispatch({\r\n        type: \"FETCH_PHONE_BY_ID_START\",\r\n      });\r\n      const phone = await fetchPhoneByIdApi(id);\r\n      dispatch({\r\n        type: \"FETCH_PHONE_BY_ID_SUCCESS\",\r\n        payload: phone,\r\n      });\r\n    } catch (err) {\r\n      dispatch({\r\n        type: \"FETCH_PHONE_BY_ID_FAILURE\",\r\n        payload: err,\r\n        error: true,\r\n      });\r\n    }\r\n  };\r\n};\r\n\r\nexport const addPhoneToBasket = (id) => (dispatch) => {\r\n  dispatch({\r\n    type: \"ADD_PHONE_TO_BASKET\",\r\n    payload: id,\r\n  });\r\n};\r\n\r\nexport const searchPhone = (text) => (dispatch) => {\r\n  console.log(\"searching \", text);\r\n  dispatch({\r\n    type: \"SEARCH_PHONE\",\r\n    payload: text,\r\n  });\r\n};\r\n\r\nexport const removePhoneFromBasket = (id) => async (dispatch) => {\r\n  dispatch({\r\n    type: \"REMOVE_PHONE_FROM_BASKET\",\r\n    payload: id,\r\n  });\r\n};\r\n\r\nexport const cleanBasket = () => (dispatch) => {\r\n  dispatch({\r\n    type: \"CLEAN_BASKET\",\r\n  });\r\n};\r\n\r\nexport const basketCheckout = (phones) => (dispatch, getState) => {\r\n  const { code: coupon, invertedDiscount } = getState().Coupon;\r\n  const revenue = phones.reduce(\r\n    (a, b) => a + (b.price * invertedDiscount || 0),\r\n    0\r\n  );\r\n\r\n  alert(JSON.stringify(phones));\r\n};\r\n"]},"metadata":{},"sourceType":"module"}